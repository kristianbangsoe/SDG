!function(e){window.projectFunctions=window.projectFunctions||{},e(document).ready(function(){projectFunctions.generalFunctions.init(),e("body").is(".page-template-find-sdg")&&projectFunctions.sdgWheelFunctions.init(),e("body").is(".page-template-network")&&projectFunctions.networkFunctions.init(),projectFunctions.accountCreate.init(),e(".carousel-feature").carousel({ride:!1,interval:9e3}),window.addEventListener("load",function(){e("html").on("DOMMouseScroll mousewheel",function(t){t.originalEvent.detail>0||t.originalEvent.wheelDelta<0?e("header").addClass("hide-nav-bar"):e("header").removeClass("hide-nav-bar")})},!1),window.addEventListener("load",function(){var t=e(".form-control"),n=(Array.prototype.filter.call(t,function(t){e(t).on("keyup change",function(){e(t).removeClass("is-invalid"),e(t).removeClass("is-valid");var n=e("#countries_select").find(":selected").data("code");e("#phonePrefix").html("+"+n),!1===t.checkValidity()?e(t).addClass("is-invalid"):e(t).addClass("is-valid")}),e("#repeatPassword, #password").on("keyup focusout",function(){e("#repeatPassword").removeClass("is-invalid"),e("#repeatPassword").removeClass("is-valid");var t=e("#password").val(),n=e("#repeatPassword").val();t!==n&&0!==n?e("#repeatPassword").addClass("is-invalid"):e("#repeatPassword").addClass("is-valid")})},!1),document.querySelectorAll(".needs-validation"));Array.prototype.slice.call(n).forEach(function(t){t.addEventListener("submit",function(n){t.checkValidity()||(n.preventDefault(),n.stopPropagation(),e("html, body").animate({scrollTop:e("form").offset().top},2e3)),t.classList.add("was-validated")},!1)})},!1)});var t,n=1,o=2,a=0;function i(){if(0==a){var t=e("#inputMunicipality").val(),n=e("#inputSdg").val(),i=e("#inputCompanyType").val(),c=e("#inputsSearch").val();!function(t,n,o,a){var i="post";void 0!==a&&(i=a),window.doingAjax=!0,e.ajax({url:t,type:i,dataType:"json",timeout:24e4,data:n,success:function(t){console.log(["Ajax Success:",t]),e("body").removeClass("loading"),window.doingAjax=!1,o(t,n)},error:function(t,a,i){console.error(["Ajax Error:",t,a,i]),e("body").removeClass("loading"),window.doingAjax=!1,"timeout"==a?(alert("Error: Your request could not be completed because it timed out. Try again later"),document.location.href="/"):o(t,n)}})}(AjaxMethodsUrl,{action:"project_filtering_method",sdg_category:n,kommune:t,company_type:i,search:c,post_amount:o},function(t,n){switch(console.log("======== response from the ajax request to example_data method ========="),console.log("here goes"+t.post_items),t.post_items){case"undefined":e(".no_results .response-2").show(),a=1;break;case!1:e(".no_results .response-1").show();break;default:e.each(t.post_items,function(t,n){var o=[];e.each(n.post_category,function(e,t){o[e]=t.name}),console.log(o);var a='\n                        <div class=" card-item project-item box-shadow col-md-4">\n                                <a class="d-flex flex-column bg-white card-item-content" href="'+n.post_url+'">\n                                    <div class="d-flex flex-column">\n                                        <i class="goal-size-1 goal-'+n.post_category_id+'"></i> \n                                        <div class="item-cover"><img  src="'+n.post_image+'" alt="'+n.post_title+'"></div>\n                                        <div class="p-4 d-flex flex-column">\n                                            <div class="card-details d-flex mb-2 color-green">'+o.join(", ")+'</div>\n                                            <h4 class="excerpt">'+n.post_title+'</h4>\n                                            <div class="mt-3 mb-2 d-flex justify-content-between">\n                                                <div class="d-flex align-items-center">\n                                                    <p class="mb-0 item-company">'+n.post_company_name+'</p>\n                                                </div>\n                                                <i class="sdg-icon sdg-arrow"></i>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </a>\n                            </div>\n                        </div>';e("#projects_feed").append(a)})}})}}e("body").on("scroll",function(){var t=e(this).get(0);t.scrollTop+t.clientHeight>=t.scrollHeight-500&&(o+=2,console.log(n),1==n&&i())});var c=function(){t=null,n=1,o=2,a=0,i()};e(window).load(function(){i(),e("#inputMunicipality, #inputCompanyType, #inputSdg").on("change keyup",function(){e(".card-item.project-item ").remove(),n=1,o=2,a=0,i()}),e("#inputsSearch").on("keyup",function(){e(".card-item.project-item").remove(),window.clearTimeout(t),t=window.setTimeout(c,1500)})}).ajaxStop(function(){e(".content-spinner").hide(),n=1}).ajaxStart(function(){0==a&&(n=0,e(".content-spinner").show(),e(".no_results .response-1, .no_results .response-2").hide())}),projectFunctions.sdgWheelFunctions=projectFunctions.sdgWheelFunctions||{},projectFunctions.sdgWheelFunctions.init=function(){this.wheel()},projectFunctions.sdgWheelFunctions.wheel=function(){e(document).ready(function(){!function(){var t=e(".center-circle").find(".little-circle"),n=t.length,o=360/n,a=-90-360/n,i=a*(Math.PI/360),c=0,s=0;e.each(t,function(){i=(a+=o)*(Math.PI/180),c=Math.round(320*Math.cos(i))+125,s=Math.round(320*Math.sin(i)),e(this).animate({left:c+"px","margin-top":1*s+"px"}),e(this).attr("data-left",c+"px").attr("margin-top",1*s+"px")});var r=e(".categories a").attr("href");e("html, body").animate({scrollTop:"+=190px"}),t.on("click",function(n){e(".categories a").attr("href",""),n.preventDefault(),e(".categories .sdg-img").css("opacity","0").delay(500);var o=e(this).data("name"),a=e(this).data("color"),i=e(this).data("description"),c=e(this).data("id");t.removeClass("active"),e(this).addClass("active"),console.log(o);var s=e(this).data("href");e("#find-sdg .half-circle-menu").css("background-color",a),e("#find-sdg").css("background-color",a+"c7"),e("#content").css("background-color","black"),e(".sdg-description").css("color","white"),e(".categories .sdg-title").hide(),e(".categories .sdg-description").text(i),e(".categories a").fadeIn(),e(".categories .sdg-img").animate({opacity:"1"}),e(".categories .sdg-img").attr("src","https://raw.githubusercontent.com/UNStats/FIS4SDGs/master/globalResources/sdgIcons1000x1000/TGG_Icon_Color_"+c+".png"),e(".categories a").attr("href",r+s)})}()})},projectFunctions.generalFunctions=projectFunctions.generalFunctions||{},projectFunctions.generalFunctions.init=function(){this.checkDevice(),this.navigation()},projectFunctions.generalFunctions.checkDevice=function(){var e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(e=!0),e},projectFunctions.generalFunctions.navigation=function(){e(window).on("load, resize",function(){}),e(document).on({ajaxStop:function(){e("#loading-screen").fadeOut()}}),e(".hamburger").on("click",function(){e(this).toggleClass("is-active"),e("html").toggleClass("nav-active")}),e(function(){e('[data-toggle="tooltip"]').tooltip()})},projectFunctions.networkFunctions=projectFunctions.networkFunctions||{},projectFunctions.networkFunctions.init=function(){e("body").hasClass("page-template-network")&&this.networkModal()},projectFunctions.networkFunctions.networkModal=function(){e(".network-item .network-name a").on("click",function(){e(this).parent().parent(".network-item").toggleClass("active"),e(".overlay").fadeIn()}),e(".overlay, .network-item .close-network").on("click",function(){e(".network-item").removeClass("active"),e(".overlay").fadeOut()});var t=[];e.when(e.getJSON("/wp-json/wp/v2/categories?per_page=20",function(n){e.each(n,function(e,n){var o=n.id,a=n.name,i=n.acf.sdg_id,c=n.parent;console.log(n),(0!=i&&1==c||0!=i&&27==c)&&t.push('<option value="'+o+'">'+a+"</option>")})})).done(function(){e(".select-input").append(t.join("")),e(".select-input, .type-input").on("change",function(){var t=e(".select-input").val(),n=e(".type-input").val();e(".network-item").each(function(){var o,a=e(this).data("category-ids"),i=JSON.parse("["+a+"]");o=!(!function(t,n){return 0==e(t).not(n).length}(JSON.parse("["+t+"]"),i)&&0!=t);var c=e(this).data("type");1==(n==c||0==n)&&1==o?e(this).show():e(this).hide()})})})},projectFunctions.accountCreate=projectFunctions.accountCreate||{},projectFunctions.accountCreate.init=function(){this.signup(),this.countries()},projectFunctions.accountCreate.countries=function(){var e=document.getElementById("countries_select");fetch("https://restcountries.eu/rest/v2/all?fields=name;callingCodes").then(function(e){return e.json()}).then(function(t){return n="",o=0,t.forEach(function(e){n+='<option data-code="'+e.callingCodes[0]+'" value="'+o+'">'+e.name+"</option>",o++}),e.innerHTML=n,void(e.selectedIndex=62);var n,o}).catch(function(e){return console.log("Error:",e)})},projectFunctions.accountCreate.signup=function(){var t=window.location.search;console.log(t);var n=new URLSearchParams(t).get("membership"),o=e("form #membership");function a(t){"1"==e(t).val()||"2"==e(t).val()?(e(".company").fadeOut(),e(".company input, .company select, .company textarea, .company range").prop("required",!1)):(e(".company").fadeIn(),e(".company input, .company select, .company textarea, .company range").prop("required",!0))}o.val(n),localStorage.setItem("membership",n),a(o),o.on("change load",function(){a(o)})};var s=e("input['text'], select, textarea, range");s.each(function(t){var n=e(this).attr("id"),o=localStorage.getItem(n);e("#"+n).val(o)}),s.on("keyup, change",function(){var t=e(this).attr("id"),n=e(this).val();localStorage.setItem(t,n)}),projectFunctions.accountCreate.radioTrigger=function(){e("#sign-up").submit(function(e){e.preventDefault()}),e("#company-type-selector button").on("click",function(){e("#company-type-selector button").removeClass("active");var t=e(this).data("company-type-id");e("#company-type-selector input[value="+t+"]").prop("checked",!0),e("#company-type-selector button[data-company-type-id="+t+"]").addClass("active");var n=e(this).html();e("#pre-sel").html(n)}),e("#sdg-selection img").on("click",function(){e("#sdg-selection img").removeClass("active");var t=e(this).data("company-sdg-id");e("#sdg-selection input[value="+t+"]").prop("checked",!0),e("#sdg-selection img[data-company-sdg-id="+t+"]").addClass("active")}),e(".company-type").on("click",function(e){e.preventDefault()})}}(jQuery);